<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="author" content="NitroMelon">
    <meta name="institution" content="Tsinghua University">
    <meta name="git" content="https://github.com/hwc0919/TreePlayground">
    <meta name="website" content="https://192.144.210.149/">
    <link rel="Shortcut Icon" href="/favicon.ico">
    <title>TreePlayground - NitroMelon</title>
</head>

<body>
    <div id="header" style="position: fixed; left: 5px; top: 5px;">
        <p style="color: gray">Recommend Chrome on PC</p>
    </div>
    <div id="TreePlayground" @mousemove='onTPMouseMove($event)' @touchmove='onTPMouseMove($event)'
        @mouseup="onTPMouseUp" @touchend="onTPMouseUp">
        <!-- Top Toolbar -->
        <div class="top-toolbar">
            <button class="btn btn-primary top-toolbar-item" type="button"
                @click="loadSampleTree(); update()">Sample</button>
            <button class="btn btn-primary top-toolbar-item" type="button" @click="traversal(0)">先序遍历</button>
            <button class="btn btn-primary top-toolbar-item" type="button" @click="traversal(1)">中序遍历</button>
            <button class="btn btn-primary top-toolbar-item" type="button" @click="traversal(2)">后序遍历</button>
            <button class="btn btn-primary top-toolbar-item" type="button" @click="traversal(3)">层次遍历</button>
            <span id="interval-ranger" class="top-toolbar-item">
                <span style="margin: 5px">间隔: <label v-text="commonParams.interval + 'ms'">500ms</label></span>
                <input type="range" min="100" max="1500" value="500" step="100" v-model.number="commonParams.interval">
            </span>
        </div>
        <!-- Left Toolbar -->
        <div class="left-toolbar">
            <button class="btn btn-default left-toolbar-item" type="button" @click="reset">Reset</button>
            <select id="tree-type-selector" class="left-toolbar-item" v-model="curTreeType">
                <option v-for="status, ttype in availTreeTypes" v-text="ttype" :value="ttype" :disabled="!status">
                </option>
            </select>
            <div id="tree-scale-ranger" class="left-toolbar-item">
                <h4>Scale: <label v-text="commonParams.treeScale + '%'"></h4>
                <input type="range" min="20" max="180" value="100" v-model.number="treeScale">
            </div>
        </div>
        <!-- Tree Visualization Part -->
        <div class="tree" ref="tree" :style="adjustScale" style="transform-origin: top;">
            <div class="tree-dragging-btn" @mousedown.self="onTreeMouseDown" @touchstart.self.prevent="onTreeMouseDown">
            </div>
            <!-- Top Functional Node -->
            <top-binnode id="trvl-sequence" :data="topSequence" @top-build="onTopBuild" @top-insert="onTopInsert"
                @top-search="onTopSearch" @top-help="onTopHelp" @top-proper="onTopProper"></top-binnode>
            <div class="left-message">{{ messages.left }}</div>
            <div class="right-message">{{ messages.right }}</div>
            <!-- Internal Tree Nodes -->
            <binnode v-for="(node, ind) in structInfo.nodes" :node="node" :key="'node' + ind"
                :class="{'active-node': node.active, 'visited-node': node.visited, 'deprecated-node': node.deprecated}"
                @remove-below="onRemoveBelow" @remove-one="onRemoveOne" @intr-update="onIntrUpdate">
            </binnode>
            <!-- External Tree Nodes -->
            <extr-binnode v-show="showExtr" v-for="(node, ind) in structInfo.extrNodes" :node="node"
                :key="'extNode' + ind" @extr-insert="onExtrInsert">
            </extr-binnode>
            <!-- Internal Tree Edges -->
            <div class="left-edge" v-for="e in structInfo.edges[0]"
                :style="{'left': e[0]+'px', 'top': e[1]+'px', 'width': e[2]+'px', 'height': e[3]+'px'}"></div>
            <div class="right-edge" v-for="e in structInfo.edges[1]"
                :style="{'left': e[0]+'px', 'top': e[1]+'px', 'width': e[2]+'px', 'height': e[3]+'px'}"></div>

            <!-- External Tree Edges -->
            <div v-show="showExtr" class="left-edge extr-edge" v-for="e in structInfo.extrEdges[0]"
                :style="{'left': e[0]+'px', 'top': e[1]+'px', 'width': e[2]+'px', 'height': e[3]+'px'}"></div>
            <div v-show="showExtr" class="right-edge extr-edge" v-for="e in structInfo.extrEdges[1]"
                :style="{'left': e[0]+'px', 'top': e[1]+'px', 'width': e[2]+'px', 'height': e[3]+'px'}"></div>
        </div>
    </div>
    <div id="footer" style="position: fixed; left: 5px; bottom: 5px;">Copyright @ 2020 NitroMelon
        <a href="https://github.com/hwc0919/TreePlayground" target="_blank">Source Code</a>
        <a href="https://github.com/hwc0919/TreePlayground/issues" target="_blank">Bug report</a>
        喜欢的话<a href="https://github.com/hwc0919/TreePlayground/stargazers" target="_blank">&nearhk;给个赞</a>哦
    </div>
    <script src="./bundle.js"></script>
</body>

</html>